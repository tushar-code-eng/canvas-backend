generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id        String          @id @default(cuid())
  userId    String          @unique
  FullName  String
  email     String          @unique
  image     String
  password  String          @default("No Password")
  Canvases  String[]        @default([])
  isGoogle  Boolean
  cursor    CursorPosition?
  createdAt DateTime        @default(now())
  updatedAt DateTime        @updatedAt
}

model Session {
  id        Int              @id @default(autoincrement())
  title     String?
  sessionId String           @unique
  hostId    String
  type      sessionEnum?
  data      Json             @default("{}")
  createdAt DateTime         @default(now())
  updatedAt DateTime         @updatedAt
  strokes   Stroke[]
  cursors   CursorPosition[]
  guests    String[]         @default([])
}

enum sessionEnum {
  Flowchart
  Desgin
  Wireframe
  Custom
}

model Stroke {
  id         Int      @id @default(autoincrement())
  name       String
  createdAt  DateTime @default(now())
  userId     String
  sessionId  Int
  session    Session  @relation(fields: [sessionId], references: [id])
  strokeData Json
}

model CursorPosition {
  id        Int      @id @default(autoincrement())
  userId    String   @unique
  user      User     @relation(fields: [userId], references: [id])
  sessionId Int
  session   Session  @relation(fields: [sessionId], references: [id])
  x         Float
  y         Float
  updatedAt DateTime @updatedAt
}
